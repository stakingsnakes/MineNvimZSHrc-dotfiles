#!/bin/bash

#!/bin/bash

# –¶–≤–µ—Ç–∞
GREEN='\033[0;32m'
BRIGHT_GREEN='\033[1;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ–π –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ª–æ–≥–æ—Ç–∏–ø–∞
draw_logo_line_by_line() {
  clear

  local lines=(
    ""
    "    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó"
    "    ‚ïë                                                    ‚ïë"
    "    ‚ïë   ‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó ‚ïë"
    "    ‚ïë   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñë‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù ‚ïë"
    "    ‚ïë   ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïê‚ïù‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïó ‚ïë"
    "    ‚ïë   ‚ñë‚ïö‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ïö‚ñà‚ñà‚ïó‚ïë"
    "    ‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ïö‚ñà‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïë"
    "    ‚ïë   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ñë‚ñë‚ñë‚ïö‚ïê‚ïù‚ñë‚ñë‚ñë‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïê‚ïù‚ñë‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ïë"
    "    ‚ïë                                                    ‚ïë"
    "    ‚ïë   ‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïó‚ñë‚ñë‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó    ‚ïë"
    "    ‚ïë   ‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñë‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù    ‚ïë"
    "    ‚ïë   ‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïî‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïê‚ïù‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë‚ñë‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñë    ‚ïë"
    "    ‚ïë   ‚ñë‚ïö‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ñà‚ñà‚ïó‚ñë‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñë‚ñë‚ñë‚ïö‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó    ‚ïë"
    "    ‚ïë   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñë‚ïö‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ñë‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ñë‚ïö‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù    ‚ïë"
    "    ‚ïë   ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïê‚ïù‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù‚ñë‚ñë‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù‚ñë    ‚ïë"
    "    ‚ïë                                                    ‚ïë"
    "    ‚ïë                   üêç ~ ~ ~ üêç                     ‚ïë"
    "    ‚ïë                                                    ‚ïë"
    "    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù"
    ""
  )

  # –û—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –ø–æ—Å—Ç—Ä–æ—á–Ω–æ
  for line in "${lines[@]}"; do
    echo -e "${BRIGHT_GREEN}${line}${NC}"
    sleep 0.08
  done

  # –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
  sleep 0.3
  echo -e "${YELLOW}    ‚ö° –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –ï–±–æsh–∏—Ç—å${NC}\n"
  sleep 0.5
}

packages=(
  bottom
  yazi
  nvim
  vim
  telegram-desktop
  firefox
  zsh
)

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤
install_packages() {
  echo -e "\n${BRIGHT_GREEN}=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ ===${NC}\n"

  local to_install=()

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∫–∏–µ –ø–∞–∫–µ—Ç—ã –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
  for package in "${packages[@]}"; do
    if ! pacman -Q "$package" &>/dev/null; then
      echo -e "${YELLOW}‚úó $package - –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
      to_install+=("$package")
    else
      echo -e "${GREEN}‚úì $package - —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
    fi
  done

  # –ï—Å–ª–∏ –µ—Å—Ç—å –ø–∞–∫–µ—Ç—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
  if [ ${#to_install[@]} -gt 0 ]; then
    echo -e "\n${BRIGHT_GREEN}–ü–∞–∫–µ—Ç—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏: ${to_install[*]}${NC}"
    read -p "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–∞–∫–µ—Ç—ã? (y/n): " answer

    if [ "$answer" = "y" ] || [ "$answer" = "Y" ]; then
      echo -e "${GREEN}üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤...${NC}\n"

      for package in "${to_install[@]}"; do
        echo -e "${GREEN}–£—Å—Ç–∞–Ω–æ–≤–∫–∞: $package${NC}"
        sudo pacman -S --noconfirm "$package"
      done

      echo -e "\n${BRIGHT_GREEN}‚úì –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞${NC}"
    else
      echo -e "${YELLOW}‚ö†Ô∏è  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤ –ø—Ä–æ–ø—É—â–µ–Ω–∞${NC}"
    fi
  else
    echo -e "\n${BRIGHT_GREEN}‚úì –í—Å–µ –ø–∞–∫–µ—Ç—ã —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã${NC}"
  fi
}

# –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –±—ç–∫–∞–ø–∞
create_backup() {
  local source_path=$1
  local item_name=$2
  local backup_dir="$HOME/Documents/config_backups"
  local timestamp=$(date +%Y%m%d_%H%M%S)
  local backup_path="$backup_dir/${item_name}_backup_${timestamp}"

  # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  mkdir -p "$backup_dir"

  echo -e "${GREEN}üíæ –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞: ${item_name} ‚Üí ${backup_path}${NC}"

  if mv "$source_path" "$backup_path"; then
    echo -e "${BRIGHT_GREEN}‚úì –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ${NC}"
    return 0
  else
    echo -e "${RED}‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±—ç–∫–∞–ø–∞${NC}"
    return 1
  fi
}

# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nvim
install_nvim_config() {
  local script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
  local nvim_source="$script_dir/nvim"
  local nvim_target="$HOME/.config/nvim"

  echo -e "\n${BRIGHT_GREEN}=== –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Neovim ===${NC}\n"

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–∞–ø–∫–∏ nvim –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
  if [ ! -d "$nvim_source" ]; then
    echo -e "${RED}‚úó –ü–∞–ø–∫–∞ nvim –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞${NC}"
    return 1
  fi

  echo -e "${GREEN}‚úì –ù–∞–π–¥–µ–Ω–∞ –ø–∞–ø–∫–∞ nvim${NC}"

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  if [ -d "$nvim_target" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nvim${NC}"
    read -p "–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –≤ ~/Documents/config_backups? (y/n): " answer

    if [ "$answer" = "y" ] || [ "$answer" = "Y" ]; then
      create_backup "$nvim_target" "nvim"
    else
      echo -e "${YELLOW}üóëÔ∏è  –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –±—ç–∫–∞–ø–∞${NC}"
      rm -rf "$nvim_target"
    fi
  fi

  # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é .config –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  mkdir -p "$HOME/.config"

  # –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
  echo -e "${GREEN}üìã –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ nvim –≤ ~/.config/nvim${NC}"
  cp -r "$nvim_source" "$nvim_target"
  echo -e "${BRIGHT_GREEN}‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nvim —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞${NC}"
}

# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ zsh
install_zsh_config() {
  local script_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
  local zsh_source="$script_dir/zshrc"
  local zshrc_target="$HOME/.zshrc"
  local p10k_target="$HOME/.p10k.zsh"

  echo -e "\n${BRIGHT_GREEN}=== –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Zsh ===${NC}\n"

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–∞–ø–∫–∏ zshrc –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
  if [ ! -d "$zsh_source" ]; then
    echo -e "${RED}‚úó –ü–∞–ø–∫–∞ zshrc –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞${NC}"
    return 1
  fi

  echo -e "${GREEN}‚úì –ù–∞–π–¥–µ–Ω–∞ –ø–∞–ø–∫–∞ zshrc${NC}"

  # –û–±—Ä–∞–±–æ—Ç–∫–∞ .zshrc
  if [ -f "$zshrc_target" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª .zshrc${NC}"
    read -p "–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –≤ ~/Documents/config_backups? (y/n): " answer

    if [ "$answer" = "y" ] || [ "$answer" = "Y" ]; then
      create_backup "$zshrc_target" "zshrc"
    else
      echo -e "${YELLOW}üóëÔ∏è  –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ .zshrc –±–µ–∑ –±—ç–∫–∞–ø–∞${NC}"
      rm -f "$zshrc_target"
    fi
  fi

  # –û–±—Ä–∞–±–æ—Ç–∫–∞ .p10k.zsh
  if [ -f "$p10k_target" ]; then
    echo -e "${YELLOW}‚ö†Ô∏è  –û–±–Ω–∞—Ä—É–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª .p10k.zsh${NC}"
    read -p "–°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø –≤ ~/Documents/config_backups? (y/n): " answer

    if [ "$answer" = "y" ] || [ "$answer" = "Y" ]; then
      create_backup "$p10k_target" "p10k"
    else
      echo -e "${YELLOW}üóëÔ∏è  –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ .p10k.zsh –±–µ–∑ –±—ç–∫–∞–ø–∞${NC}"
      rm -f "$p10k_target"
    fi
  fi

  # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã
  if [ -f "$zsh_source/.zshrc" ]; then
    echo -e "${GREEN}üìã –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .zshrc –≤ ~/home${NC}"
    cp "$zsh_source/.zshrc" "$zshrc_target"
    echo -e "${BRIGHT_GREEN}‚úì .zshrc —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
  else
    echo -e "${RED}‚úó –§–∞–π–ª .zshrc –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–∞–ø–∫–µ zshrc${NC}"
  fi

  if [ -f "$zsh_source/.p10k.zsh" ]; then
    echo -e "${GREEN}üìã –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .p10k.zsh –≤ ~/home${NC}"
    cp "$zsh_source/.p10k.zsh" "$p10k_target"
    echo -e "${BRIGHT_GREEN}‚úì .p10k.zsh —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω${NC}"
  else
    echo -e "${YELLOW}‚ö†Ô∏è  –§–∞–π–ª .p10k.zsh –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–∞–ø–∫–µ zshrc${NC}"
  fi
}

# –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Zsh –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
set_zsh_default() {
  if ! command -v zsh &>/dev/null; then
    echo -e "${RED}‚úó Zsh –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é${NC}"
    return 1
  fi

  current_shell=$(basename "$SHELL")

  if [ "$current_shell" = "zsh" ]; then
    echo -e "${GREEN}‚úì Zsh —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é${NC}"
    return 0
  fi

  echo -e "\n${BRIGHT_GREEN}=== –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zsh –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ===${NC}\n"
  echo -e "${YELLOW}–¢–µ–∫—É—â–∏–π shell: $current_shell${NC}"
  read -p "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Zsh –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é? (y/n): " answer

  if [ "$answer" = "y" ] || [ "$answer" = "Y" ]; then
    echo -e "${GREEN}üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zsh –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é...${NC}"

    zsh_path=$(which zsh)

    if chsh -s "$zsh_path"; then
      echo -e "${BRIGHT_GREEN}‚úì Zsh —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é${NC}"
      echo -e "${YELLOW}‚ö†Ô∏è  –ü–µ—Ä–µ–∑–∞–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π${NC}"
    else
      echo -e "${RED}‚úó –û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Zsh –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é${NC}"
      return 1
    fi
  else
    echo -e "${YELLOW}‚ö†Ô∏è  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zsh –∫–∞–∫ shell –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–ø—É—â–µ–Ω–∞${NC}"
  fi
}

# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
  draw_logo_line_by_line

  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
  install_packages

  echo ""

  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
  install_nvim_config
  install_zsh_config

  # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Zsh –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  set_zsh_default

  echo -e "\n${BRIGHT_GREEN}üéâ –í—Å–µ –≥–æ—Ç–æ–≤–æ!${NC}"
  echo -e "${GREEN}üìÅ **(!–ï—Å–ª–∏ –¥–µ–ª–∞–ª–∏)** –ë—ç–∫–∞–ø—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: ~/Documents/config_backups${NC}\n"
}

# –ó–∞–ø—É—Å–∫
main
